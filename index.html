<!DOCTYPE html>
<html>
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #050505; color: #00ff00; font-family: 'Courier New', monospace; margin: 0; overflow: hidden; }
        #screen { 
            width: 100vw; height: 60vh; background: #000; 
            border-bottom: 2px solid #00ff00; box-shadow: inset 0 0 20px #00ff0033;
        }
        canvas { width: 100%; height: 100%; }
        #input-area { padding: 15px; height: 40vh; box-sizing: border-box; }
        textarea { 
            width: 100%; height: 70%; background: #111; color: #0f0; 
            border: 1px solid #0f0; border-radius: 5px; padding: 10px; font-family: monospace;
        }
        button { 
            width: 100%; height: 20%; margin-top: 10px; background: #0f0; 
            color: #000; border: none; font-weight: bold; cursor: pointer; text-transform: uppercase;
        }
    </style>
</head>
<body>
    <div id="screen"><canvas id="canvas"></canvas></div>
    <div id="input-area">
        <textarea id="code" placeholder="ADD ITEM 'PLAYER' BLUE&#10;MOVE TO 100 100&#10;TEXT 'SYSTEM READY'"></textarea>
        <button onclick="run()">Execute Script</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // Установка разрешения
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight * 0.6;

        function run() {
            const code = document.getElementById('code').value;
            const lines = code.split('\n');
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Очистка
            
            ctx.strokeStyle = '#0f0';
            ctx.fillStyle = '#0f0';
            ctx.shadowBlur = 10;
            ctx.shadowColor = "#0f0";

            lines.forEach(line => {
                const p = line.toUpperCase().split(' ');
                if(p[0] === 'ADD') {
                    // Рисуем объект (например, квадрат)
                    ctx.fillStyle = p[3] || 'lime';
                    ctx.fillRect(50, 50, 40, 40);
                }
                if(p[0] === 'MOVE') {
                    // В реальном движке тут была бы анимация
                    ctx.fillRect(parseInt(p[3]), parseInt(p[4]), 40, 40);
                }
                if(p[0] === 'TEXT') {
                    ctx.font = "20px Monospace";
                    ctx.fillText(line.match(/'([^']+)'/)[1], 20, canvas.height - 20);
                }
                if(p[0] === 'BACKGROUND') {
                    document.getElementById('screen').style.background = p[2].toLowerCase();
                }
            });
        }
    </script>
</body>
</html>